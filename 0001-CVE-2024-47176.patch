From b7461ec2a8d1f2aa627b24e01e118ec4cca78ec0 Mon Sep 17 00:00:00 2001
From: Till Kamppeter <till.kamppeter@gmail.com>
Date: Sun, 29 Sep 2024 18:44:57 +0200
Subject: [PATCH] Default BrowseRemoteProtocols should not include "cups"
 protocol

Works around CVE-2024-47176, the fix will be complete removal of CUPS
Browsing functionality
---
 configure.ac | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/configure.ac b/configure.ac
index f293e803b..7a54fdf12 100644
--- a/configure.ac
+++ b/configure.ac
@@ -428,9 +428,9 @@ AC_SUBST(GIO_UNIX_CFLAGS)
 AC_SUBST(GIO_UNIX_LIBS)
 
 AC_ARG_WITH([browseremoteprotocols],
-	[AS_HELP_STRING([--with-browseremoteprotocols=value], [Set which protocols to listen for in cups-browsed (default: dnssd cups)])],
+	[AS_HELP_STRING([--with-browseremoteprotocols=value], [Set which protocols to listen for in cups-browsed (default: dnssd)])],
 	[with_browseremoteprotocols="$withval"],
-	[with_browseremoteprotocols="dnssd cups"]
+	[with_browseremoteprotocols="dnssd"]
 )
 BROWSEREMOTEPROTOCOLS="$with_browseremoteprotocols"
 AC_SUBST(BROWSEREMOTEPROTOCOLS)
